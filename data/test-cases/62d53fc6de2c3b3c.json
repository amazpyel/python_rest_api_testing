{"uid":"62d53fc6de2c3b3c","name":"test_invalid_football_api_token_returns_error","fullName":"tests.football_api.test_football_negative#test_invalid_football_api_token_returns_error","historyId":"3baa10b9f252f9baeae62502ca22a670","time":{"start":1772301499934,"stop":1772301500461,"duration":527},"status":"failed","statusMessage":"AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nassert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')","statusTrace":"monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f9f1c50e650>\n\n    @allure.feature(\"Authorization\")\n    @allure.story(\"Invalid API token\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    @pytest.mark.negative\n    def test_invalid_football_api_token_returns_error(monkeypatch):\n    \n        with allure.step(\"Override FOOTBALL_DATA_TOKEN with invalid value\"):\n            monkeypatch.setenv(\"FOOTBALL_DATA_TOKEN\", \"invalid_token\")\n    \n        with (\n            allure.step(\"Call GET /areas and expect authorization failure\"),\n            FootballApiClient() as football_client,\n            pytest.raises(RestApiError) as exc_info,\n        ):\n            football_client.get_areas()\n    \n        with allure.step(\"Validate error message indicates auth failure\"):\n            error_message = str(exc_info.value)\n    \n>           assert \"401\" in error_message or \"403\" in error_message, (\n                f\"Unexpected error message: {error_message}\"\n            )\nE           AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nE           assert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')\n\ntests/football_api/test_football_negative.py:27: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1772301497212,"stop":1772301497213,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"monkeypatch","time":{"start":1772301499934,"stop":1772301499934,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nassert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')","statusTrace":"monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f9f1c50e650>\n\n    @allure.feature(\"Authorization\")\n    @allure.story(\"Invalid API token\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    @pytest.mark.negative\n    def test_invalid_football_api_token_returns_error(monkeypatch):\n    \n        with allure.step(\"Override FOOTBALL_DATA_TOKEN with invalid value\"):\n            monkeypatch.setenv(\"FOOTBALL_DATA_TOKEN\", \"invalid_token\")\n    \n        with (\n            allure.step(\"Call GET /areas and expect authorization failure\"),\n            FootballApiClient() as football_client,\n            pytest.raises(RestApiError) as exc_info,\n        ):\n            football_client.get_areas()\n    \n        with allure.step(\"Validate error message indicates auth failure\"):\n            error_message = str(exc_info.value)\n    \n>           assert \"401\" in error_message or \"403\" in error_message, (\n                f\"Unexpected error message: {error_message}\"\n            )\nE           AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nE           assert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')\n\ntests/football_api/test_football_negative.py:27: AssertionError","steps":[{"name":"Override FOOTBALL_DATA_TOKEN with invalid value","time":{"start":1772301499934,"stop":1772301499934,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Call GET /areas and expect authorization failure","time":{"start":1772301499934,"stop":1772301500460,"duration":526},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Validate error message indicates auth failure","time":{"start":1772301500460,"stop":1772301500460,"duration":0},"status":"failed","statusMessage":"AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nassert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')\n","statusTrace":"  File \"/home/runner/work/python_rest_api_testing/python_rest_api_testing/tests/football_api/test_football_negative.py\", line 27, in test_invalid_football_api_token_returns_error\n    assert \"401\" in error_message or \"403\" in error_message, (\n        f\"Unexpected error message: {error_message}\"\n    )\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"monkeypatch::0","time":{"start":1772301500493,"stop":1772301500493,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"severity","value":"critical"},{"name":"feature","value":"Authorization"},{"name":"story","value":"Invalid API token"},{"name":"tag","value":"negative"},{"name":"parentSuite","value":"tests.football_api"},{"name":"suite","value":"test_football_negative"},{"name":"host","value":"runnervmnay03"},{"name":"thread","value":"2408-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.football_api.test_football_negative"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":12,"broken":0,"skipped":0,"passed":0,"unknown":0,"total":12},"items":[{"uid":"1eec6f738ce6a199","status":"failed","statusDetails":"AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nassert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')","time":{"start":1772300946233,"stop":1772300946980,"duration":747}},{"uid":"850ee5d34398f671","status":"failed","statusDetails":"AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nassert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')","time":{"start":1772223122628,"stop":1772223123253,"duration":625}},{"uid":"6574e34c1bb06e98","status":"failed","statusDetails":"AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nassert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')","time":{"start":1772222672482,"stop":1772222673030,"duration":548}},{"uid":"cd61409eac91f996","status":"failed","statusDetails":"AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nassert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')","time":{"start":1772220137325,"stop":1772220137845,"duration":520}},{"uid":"1c438be7b3348e0d","status":"failed","statusDetails":"AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nassert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')","time":{"start":1772219054376,"stop":1772219054908,"duration":532}},{"uid":"d351df6f803cf2cf","status":"failed","statusDetails":"AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nassert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')","time":{"start":1771953471209,"stop":1771953471910,"duration":701}},{"uid":"1b3a66bff436ead4","status":"failed","statusDetails":"AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nassert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')","time":{"start":1771789203778,"stop":1771789204413,"duration":635}},{"uid":"7ee4b7b7ef667800","status":"failed","statusDetails":"AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nassert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')","time":{"start":1771789082161,"stop":1771789082796,"duration":635}},{"uid":"a98e4f1ce8cfdb3d","status":"failed","statusDetails":"AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nassert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')","time":{"start":1771788514547,"stop":1771788515173,"duration":626}},{"uid":"f1644dfed3bf1464","status":"failed","statusDetails":"AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nassert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')","time":{"start":1771788225856,"stop":1771788226699,"duration":843}},{"uid":"83786c2125951337","status":"failed","statusDetails":"AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nassert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')","time":{"start":1771787815975,"stop":1771787816775,"duration":800}}]},"tags":["negative"]},"source":"62d53fc6de2c3b3c.json","parameterValues":[]}