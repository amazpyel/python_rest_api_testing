{"uid":"a98e4f1ce8cfdb3d","name":"test_invalid_football_api_token_returns_error","fullName":"tests.football_api.test_football_negative#test_invalid_football_api_token_returns_error","historyId":"3baa10b9f252f9baeae62502ca22a670","time":{"start":1771788514547,"stop":1771788515173,"duration":626},"status":"failed","statusMessage":"AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nassert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')","statusTrace":"monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f750a2f0510>\n\n    @allure.feature(\"Authorization\")\n    @allure.story(\"Invalid API token\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    @pytest.mark.negative\n    def test_invalid_football_api_token_returns_error(monkeypatch):\n    \n        with allure.step(\"Override FOOTBALL_DATA_TOKEN with invalid value\"):\n            monkeypatch.setenv(\"FOOTBALL_DATA_TOKEN\", \"invalid_token\")\n    \n        with allure.step(\"Call GET /areas and expect authorization failure\"):\n            with FootballApiClient() as football_client:\n                with pytest.raises(RestApiError) as exc_info:\n                    football_client.get_areas()\n    \n        with allure.step(\"Validate error message indicates auth failure\"):\n            error_message = str(exc_info.value)\n    \n>           assert \"401\" in error_message or \"403\" in error_message, (\n                f\"Unexpected error message: {error_message}\"\n            )\nE           AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nE           assert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')\n\ntests/football_api/test_football_negative.py:25: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1771788513891,"stop":1771788513892,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"monkeypatch","time":{"start":1771788514547,"stop":1771788514547,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nassert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')","statusTrace":"monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7f750a2f0510>\n\n    @allure.feature(\"Authorization\")\n    @allure.story(\"Invalid API token\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    @pytest.mark.negative\n    def test_invalid_football_api_token_returns_error(monkeypatch):\n    \n        with allure.step(\"Override FOOTBALL_DATA_TOKEN with invalid value\"):\n            monkeypatch.setenv(\"FOOTBALL_DATA_TOKEN\", \"invalid_token\")\n    \n        with allure.step(\"Call GET /areas and expect authorization failure\"):\n            with FootballApiClient() as football_client:\n                with pytest.raises(RestApiError) as exc_info:\n                    football_client.get_areas()\n    \n        with allure.step(\"Validate error message indicates auth failure\"):\n            error_message = str(exc_info.value)\n    \n>           assert \"401\" in error_message or \"403\" in error_message, (\n                f\"Unexpected error message: {error_message}\"\n            )\nE           AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nE           assert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')\n\ntests/football_api/test_football_negative.py:25: AssertionError","steps":[{"name":"Override FOOTBALL_DATA_TOKEN with invalid value","time":{"start":1771788514547,"stop":1771788514547,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Call GET /areas and expect authorization failure","time":{"start":1771788514547,"stop":1771788515172,"duration":625},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Validate error message indicates auth failure","time":{"start":1771788515172,"stop":1771788515172,"duration":0},"status":"failed","statusMessage":"AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nassert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')\n","statusTrace":"  File \"/home/runner/work/python_rest_api_testing/python_rest_api_testing/tests/football_api/test_football_negative.py\", line 25, in test_invalid_football_api_token_returns_error\n    assert \"401\" in error_message or \"403\" in error_message, (\n        f\"Unexpected error message: {error_message}\"\n    )\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"monkeypatch::0","time":{"start":1771788515201,"stop":1771788515201,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"feature","value":"Authorization"},{"name":"severity","value":"critical"},{"name":"story","value":"Invalid API token"},{"name":"tag","value":"negative"},{"name":"parentSuite","value":"tests.football_api"},{"name":"suite","value":"test_football_negative"},{"name":"host","value":"runnervmwffz4"},{"name":"thread","value":"2225-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.football_api.test_football_negative"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":0,"unknown":0,"total":3},"items":[{"uid":"f1644dfed3bf1464","status":"failed","statusDetails":"AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nassert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')","time":{"start":1771788225856,"stop":1771788226699,"duration":843}},{"uid":"83786c2125951337","status":"failed","statusDetails":"AssertionError: Unexpected error message: 400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}\nassert ('401' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}' or '403' in '400: {\"message\":\"Your API token is invalid.\",\"errorCode\":400}')","time":{"start":1771787815975,"stop":1771787816775,"duration":800}}]},"tags":["negative"]},"source":"a98e4f1ce8cfdb3d.json","parameterValues":[]}